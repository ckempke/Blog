
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Generate "decent-sounding" languages procedurally">
      
      
        <meta name="author" content="Christopher Kempke">
      
      
        <link rel="canonical" href="https://ckempke.github.io/Blog/blog/procedural-language/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Procedural Language Generation - Christopher Kempke's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#procedural-language-generation-for-a-fantasy-game" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Christopher Kempke&#39;s Blog" class="md-header__button md-logo" aria-label="Christopher Kempke's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Christopher Kempke's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Procedural Language Generation
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Christopher Kempke&#39;s Blog" class="md-nav__button md-logo" aria-label="Christopher Kempke's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Christopher Kempke's Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        Posts by Topic
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-we-trying-to-build" class="md-nav__link">
    What are we trying to build?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-makes-up-a-language" class="md-nav__link">
    What makes up a language?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syllables-to-the-rescue" class="md-nav__link">
    Syllables to the rescue
  </a>
  
    <nav class="md-nav" aria-label="Syllables to the rescue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#not-all-syllables-are-equal" class="md-nav__link">
    Not all Syllables are equal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-mse-once-bit-my-sister" class="md-nav__link">
    A Møøse Once Bit My Sister
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ok-now-do-we-put-this-together" class="md-nav__link">
    OK, Now do we put this together?
  </a>
  
    <nav class="md-nav" aria-label="OK, Now do we put this together?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generating-the-language-patterns" class="md-nav__link">
    Generating the Language Patterns
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilities" class="md-nav__link">
    Utilities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generating-words" class="md-nav__link">
    Generating Words
  </a>
  
    <nav class="md-nav" aria-label="Generating Words">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generating-longer-text" class="md-nav__link">
    Generating Longer Text
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partial-translations" class="md-nav__link">
    Partial translations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#non-random-properties" class="md-nav__link">
    Non-Random Properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-predictable-properties" class="md-nav__link">
    Non-Predictable Properties
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<div class="blogging-tags-grid">

        <a href="https://ckempke.github.io/Blog/tags#language" class="blogging-tag"><code>#language</code></a>

        <a href="https://ckempke.github.io/Blog/tags#procedural generation" class="blogging-tag"><code>#procedural generation</code></a>

        <a href="https://ckempke.github.io/Blog/tags#technology" class="blogging-tag"><code>#technology</code></a>

        <a href="https://ckempke.github.io/Blog/tags#games" class="blogging-tag"><code>#games</code></a>

    </div>

<style>
    .md-typeset .blogging-tags-grid {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 5px;
    }

    .md-typeset .blogging-tag {
        color: var(--md-typeset-color);
        background-color: var(--md-typeset-code-color);
    }

    .md-typeset .blogging-tag code {
        border-radius: 5px;
    }
</style>
<h1 id="procedural-language-generation-for-a-fantasy-game">Procedural Language Generation for a Fantasy Game<a class="headerlink" href="#procedural-language-generation-for-a-fantasy-game" title="Permanent link">&para;</a></h1>
<p><em>No Man's Sky</em> has an interesting—if not particularly realistic—language mechanism.  Each of its three main races, plus the Atlas, have their own language.   The player learns these languages (if they wish), one word at a time, and when presented with text in the "alien" language, known words are substituted with the player's chosen game language (which I'll assume to be English for convenience, here, although the game ships with several real-world languages available).</p>
<p>This makes finding and learning new words a background game objective, and adds more things for the player "to do" that produce meaningful rewards, which is always a challenge for procedural games, where things like quests, monsters, and locations are almost literally cookie-cutter.</p>
<p>NMS makes several simplifying assumptions:</p>
<ul>
<li>A "word" in the alien language corresponds to exactly one "word" in English. </li>
<li>Even more unrealistically:  word order, grammar, and punctuation of the alien languages correspond exactly to English, as well.   Effectively all alien languages are substitution ciphers, where you take an English sentence, substitute an alien word for each English one, and produce the result.</li>
<li>Things like homographs (words that are the same spelling but different pronunciation and/or meaning, like pencil "lead" vs. "lead" troops) are homographs in all the languages, as well.</li>
<li>All the languages are written using the same character set.</li>
</ul>
<p>As anyone who's ever learned another language can tell you, none of these are particularly realistic; some are laughably silly.   But the simplifications actually make the language interactions more puzzle-like, since you've got more information available to you than just the set of words that you know.</p>
<h2 id="what-are-we-trying-to-build">What are we trying to build?<a class="headerlink" href="#what-are-we-trying-to-build" title="Permanent link">&para;</a></h2>
<p>For a game I'm writing, I'm looking for a similar mechanism.   Like NMS, this game is extremely--almost pathologically-procedural, at least to the limits of what a single developer can produce in a reasonable time.  (I've resorted to asset store monsters, for example).</p>
<p>One planned element here is procedural pasts.  At world creation time, the last few thousand years of "history" are procedurally generated.  Each empire's ebb and flow are recorded, so that at any given time we can say things like "this particular area was held by the \'Empire of Bob\' 2000 years ago, so if you have ruins/dungeons/castles from that time, they're probably Bobian."   This stuff then feeds into the quest, lore, and location generators.  Similarly, the state of the generator at the "present time" determines political boundaries.</p>
<p>So I want each of these empires, kingdoms, etc.—both past and present—to have languages associated with them.   Often it'll be one-to-one: an empire speaks a specific language.  But it need not be:  sometimes there will be multiple "competing" languages within and empire (especially if it just took over lands that used to be owned by another), and often a language will be shared across empires (especially if friendly, or parts of the same historical empire.).  In the real world, languages are sometimes separated by political boundaries, but far more often by either geography, culture, or history.</p>
<p>In a nutshell, though, we don't know how many languages we're going to need, it can be arbitrarily many, or few, depending on what the generator produces.   And we'd like an additional requirement:  these languages shouldn't be just random strings of pronounceable characters.    They should be <em>visually distinct</em> from each other.   Players should be able to distinguish languages from each other by appearance, at least most of the time.</p>
<p>So we want a system to generate arbitrarily many distinct languages, each of which can be "learned" piecemeal in the <em>No Man's Sky</em> style.</p>
<h2 id="what-makes-up-a-language">What makes up a language?<a class="headerlink" href="#what-makes-up-a-language" title="Permanent link">&para;</a></h2>
<p>The dictionary tells us that a "language" is...well, it doesn't actually matter, because don't actually want a language.  We want something that <em>looks</em> and <em>works</em> just enough like a natural language to be a game substitute for one—similar to how we abstract "injury" into "hit points" or the uneven task of learning skills into "skill trees" of one sort or another.</p>
<p>Tolkien was a master of creating languages (he used real languages as a base).   Even ignoring the writing system glyphs, you could tell them apart:  elvish was full of L and N and vowel sounds, the dwarves used lots of K, H, D, and U.  Men (by which he mean "all humans"—<em>The Hobbit</em> was published in 1937) tended toward old-English-y names with lots of E's and O's.</p>
<p>Star Trek's <em>Klingon</em>, meant to be the harsh tongue of a warrior race, leans heavily into hard consonants: Q, K, and P, and loves glottal stops (the hard break between consonant sounds that don't blend into each other):  "Q'pla" and the like; a sort of "coughing" language that would probably be impractical in real life.  Maybe the closest approximation being something like the San language or German.</p>
<p>But if we just make tables of letter frequencies and put them together, we tend to get unpronounceable messes:  "BHGLUM", "UEILNL", and the like.   That might actually work for Klingon, but in general, it's not going to give us what we want.    We could try to construct rules like "consonants and vowels need to alternate", which will produce always-pronounceable strings, but with more regularity than we'd like.</p>
<h2 id="syllables-to-the-rescue">Syllables to the rescue<a class="headerlink" href="#syllables-to-the-rescue" title="Permanent link">&para;</a></h2>
<p>Luckily, we've got a better construct to build from: the syllable.    Syllables are pronounceable sub-components of a word; effectively they're the "units" from which words are build.    Typically, each one represents a vowel sound and some optional surrounding consonants.</p>
<p>What really sets the sounds of languages apart is their choice of syllables.   English is a weird outlier:  because of "borrowing" from every language under the sun, it has something like 16,000 unique syllables in its lexicon.    Mandarin Chinese, on the other hand, has a mere 400 or so, although these are multiplied by four or five different "pronunciation frequencies" or "tones," to give about 1700 real ones.   </p>
<p>Even Mandarin is far more than we need.   Depending on who you ask, what you mean by "word" (are names included? Are plurals/tenses separate words?), and the specific language you're asking about, most people use about 10,000 different words in daily speech, and languages run somewhere between 80,000 and 150,000 total words.</p>
<p>But we don't care about the total words, much.   It would be a rare game whose text included all of  "verdant," "riboflavin," and "calligraphic."    We just need our language to be capable of covering any reasonable set of words that <em>we are actually going to use</em>.   I've seen estimates that a mere 1000 words is enough to read a newspaper, even if we double or triple that (say, a game like <em>Skyrim</em> with hundreds of "books" in it to read), we're still not talking any significant fraction of a real language's scope.</p>
<p>So let's say we choose a target of 5,000 unique constructible "words" in our language.   How many syllables do we need?</p>
<p>If words are one syllable each, we need 5000 of them.    But if words are just two syllables, suddenly we need only about 70 of them <span class="arithmatex">\((\sqrt{5000})\)</span>.   At three syllables, it's (<span class="arithmatex">\(\sqrt[3]{5000}\)</span>),  a mere 18 syllables.    Since most languages support words of varying length (in fact, average word length in syllables is one of the distinguishing characteristics of languages), or we allow homographs, we could get by with even fewer.</p>
<h3 id="not-all-syllables-are-equal">Not all Syllables are equal<a class="headerlink" href="#not-all-syllables-are-equal" title="Permanent link">&para;</a></h3>
<p>So far, we've got two "knobs" we can adjust in order to create our languages:</p>
<ul>
<li>Number of syllables per word</li>
<li>The number of available syllables.</li>
</ul>
<p>Next, we should consider the syllables themselves.  This is where we give a language it's character.  Consider, for example, a "soft" language (like Tolkien's Elvish) where we emphasize lilting or rolling consonants (like L, H, M, N) and vowel sounds:</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">softSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;()</span><span class="w"> </span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;la&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;le&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;li&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ly&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;na&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ne&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ni&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;no&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ny&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ha&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;he&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ho&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ma&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;me&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;my&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;al&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;el&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ul&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;il&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ol&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yl&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;an&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;em&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;um&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;im&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;om&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ym&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;an&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;en&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;un&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;in&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;on&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yn&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>This is C#, because the implementation is going to be in Unity, but the language doesn't matter much.   That's 35 syllables right there, and even using just that, we can get pleasant-sounding nonsense like ""noulmima na om olloully" or "emmuno lo nyhymu ynny."     The regularity of the 2-character syllables produces a sort of artificial-looking regularity to the generated text, but we can work with that.</p>
<p>A different set of syllables, heavy on sibilants (S, soft C) and hard consonants (K, P, T):</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">hardSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ka&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ke&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ku&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ko&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ky&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;sa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;se&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;su&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;si&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;so&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ta&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;te&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ti&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;to&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ty&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;pa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;po&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;py&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ak&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ek&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uk&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ik&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ok&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yk&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;at&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;et&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ut&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;it&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ot&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yt&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;as&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;es&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;us&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;is&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;os&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ys&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>This gives us phrases like: "eskiakit ystuet ikas ytteak" and "taok ok ik ikpa."   Again, there's too much repetitiveness and pattern here, but again, that's because our syllables set is somewhat uniform and limited.</p>
<p>These are sort of the "extremes" of a syllabic spectrum.   If we define several sets, ranging from lilting to harsh, we then have a third knob for our languages:  what sets of syllables are available to it.   Something like English or German might distribute pretty easily across the whole spectrum.   Spanish-like languages would tend toward the softer end, something like Russian (or Klingon)  toward the harder end.  (Fantasy languages will likely go further out on the spectrum than natural languages will, because natural languages tend to evolve toward more easily-spoken forms over time.) </p>
<p>So if we provide a way to generate a distribution (so many syllables from group A, so many from group B, etc.), we can use it to generate languages of different "character."</p>
<p>There are hundreds, maybe thousands, of potential syllables using roman/English alphabets, spellings, and pronounciation rules.  It's not necessary to provide an exhaustive list -- a few dozen at most should be enough to generate a rich set of languages.  (I've provided my lists in the code at the end of this article)</p>
<h3 id="a-mse-once-bit-my-sister">A Møøse Once Bit My Sister<a class="headerlink" href="#a-mse-once-bit-my-sister" title="Permanent link">&para;</a></h3>
<p>Since we're generating for a written form, and not too concerned about pronunciation, we can also use diacritical marks (those little accents, diaereses, umlauts, grave accents, circumflexes, macrons, tildes, etc.) more or less as decorations rather than to fulfill their usual functions of altering pronunciation, aspiration, or emphasis.   By building syllable sets that include diacritical forms, we can then choose (or randomly assign) languages to use them or not.</p>
<p>There are some caveats to doing this.   The first is that we're likely to generate things that range from nonsensical to outright offensive to speakers of the languages whose marks we're borrowing (e.g. there's no such thing as an "e-umlaut" in German, but Unicode lets us generate one easily enough: "ë".)</p>
<p>If the system you're using is <em>not</em> Unicode-savvy, the risks become much higher.   A generation of computer users grew up with "smart quotes" from a Mac rendering as gibberish on a PC—and vice versa—even if you were using Microsoft Word on both; you still see these weird characters show up on the web occasionally.    And the encoding set of your language or OS may be the least of your problems:  any new glyph you use has to be present in whatever font you're using; which is a sort of hit-or-miss proposition when you're using characters "borrowed" from languages other than the ones the font is meant for.   We've all seen the "square" character rendered in place of some missing glyph (or lots of them) from a font.</p>
<p>Still, if you're confident in your encoding and font, diacriticals can add another visual distinction to a language, especially if you use different selections of them for different languages.</p>
<p>We could go even further down this rabbit hole and generate whole new glyphs (like <em>Ultima</em>'s rune writing) for our systems, but that just makes the font problem even worse.   You see this a lot in science fiction movies:  "alien" alphabets that are full of dots and symmetric geometric forms.</p>
<h2 id="ok-now-do-we-put-this-together">OK, Now do we put this together?<a class="headerlink" href="#ok-now-do-we-put-this-together" title="Permanent link">&para;</a></h2>
<p>We want to provide our developer with at least the following capabilities:</p>
<ul>
<li>Generate new synthetic languages</li>
<li>Provide a string in "real" language and have that translated into the equivalent synthetic language string.   For convenience, we probably want to do this at the word level as well as at being able to provide a longer string of text.</li>
<li>Provide a string in "real" language, along with a "dictionary" (in the literary, not programming, sense) of words that the player "knows", and have it translated into the equivalent synthetic language string with the "known" words indicated in the real language.</li>
</ul>
<p>Note that translations are always real -&gt; synthetic, not the other way around.   The app will deal in "real" strings, and convert them to synthetic (or part-synthetic) when presenting them to the users.</p>
<h3 id="generating-the-language-patterns">Generating the Language Patterns<a class="headerlink" href="#generating-the-language-patterns" title="Permanent link">&para;</a></h3>
<p>Our first step is to be able to choose values for all those "knobs" we discussed earlier:   syllable count ranges, which syllable sets to use, how many syllables to use from each set, whether we use punctuation (and if so, which punctuation) as syllable-separators, and the like.</p>
<p>We'd like to spare our caller needing to pick values for all those knobs, and ideally allow them to set none at all—if they wish—for a completely random one.</p>
<p>So we'll define a couple of "categories" here that categorize the language more simply:</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1">// Determines whether the language picks mostly from</span>
<span class="w">    </span><span class="c1">// the &quot;soft,&quot; &quot;middle,&quot; or &quot;hard&quot; syllables</span>
<span class="w">    </span><span class="c1">// RANDOM chooses one of these values with equal probability.</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">LanguageBias</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">RANDOM</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">SOFT</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">MIDDLE</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">HARD</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Determines the number of syllables used for words (simple = fewer),</span>
<span class="w">    </span><span class="c1">// and the number of total syllables in the language (simple = fewer here, too). </span>
<span class="w">    </span><span class="c1">// RANDOM generates a random value.</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">RANDOM</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">SIMPLE</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">MEDIUM</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">COMPLEX</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>In both cases, we have a <code>.RANDOM</code> value that we can use if the developer doesn't want to think about it.</p>
<p>We can then define a bunch of properties for our language:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Language</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// These are the actual syllables that make up the language.   Something like</span>
<span class="w">    </span><span class="c1">// 20 is probably enough for most purposes (remember that the entire vocabulary</span>
<span class="w">    </span><span class="c1">// necessary will only have to cover the in-game strings that occur, so a few thousand</span>
<span class="w">    </span><span class="c1">// words will cover it.</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">syllables</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// These should add up to 100.  They are the chances that a given word will</span>
<span class="w">    </span><span class="c1">// be 1, 2, 3, 4... syllables, respectively.   So {10, 80, 10} would mean that</span>
<span class="w">    </span><span class="c1">// most words in the language are 2 syllables, but 10% are 1 syllable, and 10% are 3.</span>
<span class="w">    </span><span class="c1">// If the language is very regular: (all words are the same number of syllables, or</span>
<span class="w">    </span><span class="c1">// there are only a couple of possibilities), you&#39;ll want more syllables in the list</span>
<span class="w">    </span><span class="c1">// above to cover the vocabulary.</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// If true, the language uses punctuation to separate syllables within a word,</span>
<span class="w">    </span><span class="c1">// e.g. O&#39;clock, brick-a-brack.</span>
<span class="w">    </span><span class="c1">// if true, &quot;punctuations&quot; holds the list of available characters, and</span>
<span class="w">    </span><span class="c1">// &quot;punctuationChance&quot; is the percent chance that any two syllables will</span>
<span class="w">    </span><span class="c1">// have a punctuation mark between them, and &quot;leadPunctuationChance&quot; is the</span>
<span class="w">    </span><span class="c1">// percent chance (which could be higher or lower than punctuationChance) that</span>
<span class="w">    </span><span class="c1">// there will be a punctuation mark specifically after the first syllable.</span>
<span class="w">    </span><span class="c1">// (Real, Fantasy, and Science fiction &quot;languages&quot; seem to emphasize that form a lot. </span>
<span class="w">    </span><span class="c1">// Q&#39;pla! T&#39;Challa, O&#39;Callahan).</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">usesPunctuationDelimeters</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="p">[]?</span><span class="w"> </span><span class="n">punctuations</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">float?</span><span class="w"> </span><span class="n">punctuationChance</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">float?</span><span class="w"> </span><span class="n">leadPunctuationChance</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// The actual &quot;dictionary&quot; of associations between English (or whatever) and</span>
<span class="w">    </span><span class="c1">// the synthetic language.</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">dictionary</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// The actual name of the language, in it&#39;s own language.</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">languageName</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Note that I'm using some C# nullables here, for the potentially-unnecessary punctuation dictionary.  Unity's Mono support doesn't allow nullables in older versions; so if your compiler complains, just get rid of the "?" characters in the definition of <code>punctuations</code>,<code>punctuationChance</code>, and <code>leadPunctuationChance.</code></p>
<p>Let's write a constructor:</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nf">Language</span><span class="p">(</span><span class="n">LanguageBias</span><span class="w"> </span><span class="n">bias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">RANDOM</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">LanguageComplexity</span><span class="w"> </span><span class="n">complexity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">RANDOM</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>The developer who wants a particular harshness and complexity can choose it, but called without arguments, we'll just choose at random.    For harshness bias, that's pretty easy:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Choose a bias emphasis.</span>
<span class="n">LanguageBias</span><span class="w"> </span><span class="n">useBias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">bias</span><span class="p">;</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bias</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">RANDOM</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">3</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="m">0</span><span class="p">:</span><span class="w"> </span><span class="n">useBias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">SOFT</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="m">1</span><span class="p">:</span><span class="w"> </span><span class="n">useBias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">MIDDLE</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">default</span><span class="p">:</span><span class="w"> </span><span class="n">useBias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">HARD</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This makes the odds even for each possibility, but you can fiddle with the values, if you like.  </p>
<blockquote>
<p>Side Note:  As you're about to notice, I'm using a lot of "magic numbers"—rather than constants.  This is an "author trick" to make numbers appear near their usage in context.  This is great for authoring blog articles, but sucks for maintenance, where you'd like to have them all in an easily-found block.   Once you're done fiddling and have dialed in values you like, you may want to consider changing them to proper constants.</p>
</blockquote>
<p>"Complexity" is a little tougher, we're using it as a proxy for both the total number of syllables in the lexicon and the average number of syllables per word.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// And a number of syllables (a crude measure of language complexity).</span>
<span class="kt">int</span><span class="w"> </span><span class="n">numSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="m">120</span><span class="p">);</span><span class="w"></span>
<span class="n">percentSyllableCountChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">};</span><span class="w"></span>

<span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">complexity</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">SIMPLE</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="n">numSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">percentSyllableCountChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">MEDIUM</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="n">numSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">70</span><span class="p">,</span><span class="w"> </span><span class="m">105</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">percentSyllableCountChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="m">35</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">COMPLEX</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="n">percentSyllableCountChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="m">35</span><span class="p">,</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">        </span><span class="n">numSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">120</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">default</span><span class="p">:</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="c1">// Already covered</span>
<span class="p">}</span><span class="w"></span>

<span class="n">syllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">ChooseSyllables</span><span class="p">(</span><span class="n">useBias</span><span class="p">,</span><span class="w"> </span><span class="n">numSyllables</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Again, these are numbers that worked pretty well for me; you can change any of these numbers to match your own needs.   The main constraint here is the number of syllables available in the sets.   Mine are relatively small; if you have a <em>lot</em> of potential syllables, the <code>numSyllables</code> value can go higher and you can bias more toward shorter words.   Real world languages tend to settle in around 1-3 syllables for most common words, since it literally makes speaking easier.  We're not considering word rarity here (in English, at least, significantly multisyllabic words tend to be used less, e.g. "significantly multisyllabic" vs. "long").</p>
<p>We'll come back to <code>ChooseSyllables</code>; it just picks a random set of syllables for the language, biased by <code>useBias</code>.</p>
<p>I want to use punctuation to add a little flavor to my languages, but I don't want to use it very often, or very much of it, to prevent the languages looking like caricatures.   So I'm fixing some values here.    It would make sense to have some rules (e.g. "harsh languages have more punctuation"), but I didn't bother for my needs.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// We&#39;ll use a fixed 15% chance that our language uses punctuation delimiters</span>
<span class="n">usesPunctuationDelimeters</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">15</span><span class="p">;</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">usesPunctuationDelimeters</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Set these to small, fixed values for now.  We can be more</span>
<span class="w">    </span><span class="c1">// selective later, if we need more variation.</span>
<span class="w">    </span><span class="n">punctuations</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="n">punctuationChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">10f</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">leadPunctuationChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">35f</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Again, if your compiler complains about C# nullables (or you just don't want to use them), get rid of the "if" and always set those values, even though they won't be used.  Note that the two "...Chance" variables are floats, not integers, to allow greater fine-tuning (like English, where hyphenated words are well under 1% of the language).</p>
<p>Finally, we just initialize the dictionary Dictionary (sigh...) that will hold our translations as we make them, and then generate a name for our language (in itself, of course).</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">dictionary</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">&gt;();</span><span class="w"></span>
<span class="w">    </span><span class="n">languageName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">GenerateLanguageName</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="utilities">Utilities<a class="headerlink" href="#utilities" title="Permanent link">&para;</a></h3>
<p>Let's write a couple utility functions.   We've seen one already, <code>ChooseSyllables()</code>, which selects the syllable set that will be part of our language.</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">ChooseSyllables</span><span class="p">(</span><span class="n">LanguageBias</span><span class="w"> </span><span class="n">bias</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">chosen</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">favorite</span><span class="p">,</span><span class="w"> </span><span class="n">secondBest</span><span class="p">,</span><span class="w"> </span><span class="n">thirdBest</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Order our lists by how much we like them.</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">bias</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">SOFT</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="n">favorite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">softSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">secondBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">middleSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">thirdBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hardSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">HARD</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="n">favorite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hardSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">secondBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">middleSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">thirdBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">softSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">MIDDLE</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="k">default</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="n">favorite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">middleSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">secondBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">softSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">thirdBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hardSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">chosen</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">percentileRoll</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">syllable</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentileRoll</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">70</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">syllable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">favorite</span><span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">favorite</span><span class="p">.</span><span class="n">Count</span><span class="p">)];</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentileRoll</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">95</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">syllable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">secondBest</span><span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">secondBest</span><span class="p">.</span><span class="n">Count</span><span class="p">)];</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">syllable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">thirdBest</span><span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">thirdBest</span><span class="p">.</span><span class="n">Count</span><span class="p">)];</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(!</span><span class="n">chosen</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">syllable</span><span class="p">))</span><span class="w"></span>
<span class="w">            </span><span class="n">chosen</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">syllable</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">chosen</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This isn't going to win any efficiency awards.  That <code>while</code> loop does an awful lot of <code>List.Contains()</code> calls (which, since our list is unsorted, is O(n) each time), and after all that effort will throw away the syllable it just picked if it happens to already be in the list.</p>
<p>The actual performance hit here is inversely proportional to the difference between the total number of syllables available in our lists and the number we're looking for.    If we've got lots more syllables available than we need, it's not bad.   As the "excess" becomes smaller, the odds of a collision get higher, and we end up discarding more syllables.   If the excess becomes very small, this could take a very long time to "find" those last few free syllables.</p>
<p>If the excess is negative (we're asking for more unique syllables than exist), this will loop forever, and you'll get a crash course (well, a "hang course") in how to recover from a hang.  (Hint -- kill the Unity Editor by whatever the standard means is on your platform).</p>
<p>So, let's add a check at the beginning:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">syllablesAvailable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">softSyllables</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">middleSyllables</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">hardSyllables</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"></span>
<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">syllablesAvailable</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">1.5f</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">$&quot;ASSERT: We&#39;re looking for {number} syllables out of {syllablesAvailable}, which will likely take a long time.&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>This will check (in debug builds) that we've got at least 150% of the number of syllables that we're asking for.    That doesn't actually <em>fix</em> the problem, but it should make us aware of it.</p>
<p>An easier case is <code>SyllableCount()</code>, which just used that <code>percentSyllableCountChance</code> array to choose the a number of syllables according to the provided probability distribution:</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">SyllableCount</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">outNum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">[</span><span class="n">outNum</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">num</span><span class="w"> </span><span class="p">-=</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">[</span><span class="n">outNum</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="n">outNum</span><span class="p">++;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">outNum</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Once again, the Software Engineer in me is squinting unpleasantly at this.   The problem is that "100."   If we have no bugs, and our "percent chances" are actually percents (i.e. add up to 100), then this works fine.   But if we happen to give it an array that sums to more than 100, then the higher values will never get picked.    And if we give it an array that sums to less than 100, this will crash if the random generator picks a number greater than our maximum!</p>
<p>So are you feeling lucky?   I'm not.   Let's fix it.</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">SyllableCount</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">chanceSum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">chance</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">chanceSum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">chance</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">chanceSum</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">outNum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">[</span><span class="n">outNum</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">num</span><span class="w"> </span><span class="p">-=</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">[</span><span class="n">outNum</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="n">outNum</span><span class="p">++;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">outNum</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>That works better—although it the chance array were empty, or if it held negative values, we could get weird effects.    We should return a reasonable default in the first case, and assert on the latter:</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">SyllableCount</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentSyllableCountChance</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">chanceSum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">chance</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">chanceSum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">chance</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">chance</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span>
<span class="w">           </span><span class="s">&quot;ASSERT: Zero or negative probability in percentSyllableCountChance.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">chanceSum</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">outNum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">[</span><span class="n">outNum</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">num</span><span class="w"> </span><span class="p">-=</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">[</span><span class="n">outNum</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="n">outNum</span><span class="p">++;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">outNum</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Some of you may note that that summing <code>foreach</code> loop is the "Reduce" of the "Map / Reduce" algorithm pair, available in effectively every code framework in the world....except .NET.   Linq gives you <code>Select</code> and <code>Aggregate</code>, which are rough equivalents, albeit with a syntax that makes kittens cry.   I'll stick with the readable <code>foreach</code> loop.  You're welcome.</p>
<h2 id="generating-words">Generating Words<a class="headerlink" href="#generating-words" title="Permanent link">&para;</a></h2>
<p>We're ready for our big debut.   Let's actually build words in our new language!  It's sort of anti-climactic, after all that setup:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GenerateWordFor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">baseLanguageWord</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(!</span><span class="n">dictionary</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">numSyll</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SyllableCount</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">numSyll</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="p">++)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">word</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">syllables</span><span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">syllables</span><span class="p">.</span><span class="n">Count</span><span class="p">)];</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">usesPunctuationDelimeters</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">numSyll</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">percent</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="m">100f</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percent</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="p">==</span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">?</span><span class="w"> </span><span class="n">leadPunctuationChance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">punctuationChance</span><span class="p">))</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">choice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">punctuations</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span><span class="w"></span>
<span class="w">                    </span><span class="n">word</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">punctuations</span><span class="p">[</span><span class="n">choice</span><span class="p">];</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="n">dictionary</span><span class="p">[</span><span class="n">baseLanguageWord</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">word</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">dictionary</span><span class="p">[</span><span class="n">baseLanguageWord</span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>We start by making sure we haven't already seen this word.  If we have, it's in our dictionary (literary sense, although it's also a Dictionary in the software sense), and we just return the previous translation.</p>
<p>Otherwise, it's fairly straightforward.   Pick a number of syllables, add one at random, and slap a little punctuation on there, if our language and random numbers agree.  (Note that we never put punctuation <em>after</em> the last syllable, which is just a stylistic choice.)</p>
<h3 id="generating-longer-text">Generating Longer Text<a class="headerlink" href="#generating-longer-text" title="Permanent link">&para;</a></h3>
<p>So now we've got all the pieces we need to do longer text:  we just divide it into words, pass each word through <code>GenerateWordFor()</code> and concatenate them all back together.    But that quick algorithm belies some complicated decisions.   Specifically, what's a word?</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GenerateTextFor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">baseLanguageText</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">words</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">baseLanguageText</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39; &#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">outString</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">words</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">GenerateWordFor</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Get rid of that last space.</span>
<span class="w">        </span><span class="n">outString</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">outString</span><span class="p">.</span><span class="n">TrimEnd</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">outString</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>That's our baseline case.   Maybe it's good enough for some uses, but it's pretty primitive.   We're just treating every run of characters that's not a space as a word.   "Don't" is a word.  But so is "Hello.", <em>including the period.</em>  Or "funny-looking".   </p>
<p>From a quick test run:</p>
<div class="highlight"><pre><span></span><code>&quot;Hello, my fine countryman.&quot; in language: aklon is &quot;ni dap foeza vo&quot;
</code></pre></div>
<p>Just at a first glance, we've lost the comma, the period at the end, and the capitalization of the first letter.   "Hello," "Hello" "hello" "hello." would all be treated as different words.   If our "sources" language is something like Chinese, that doesn't tend to use spaces between words, it's even less useful.</p>
<p>We'll gloss over that last point, except to note that we may need to make different versions of GenerateTextFor() for some different (real) input languages.  </p>
<p>But for our "generic Roman language" case:</p>
<ul>
<li>We'd like words to be translated case-insensitively ("hello" and "HELLO") as the same word.</li>
<li>We'd like to maintain first--character--case.   If a word is capitalized in the source text, it should be capitalized in the translation, too.    But we'll live with words in all-caps or other partial-capitalization patterns being considered as all-lower-case.    But even in this case, "Hello" and "hello" should translated to the same word (say, "Blah" and "blah"). </li>
<li>Many people don't differentiate between hyphens and dashes when writing, so it's probably safest to just treat hyphens as word breaks, unless we know that our text uses them only as hyphens.   This will result in hyphenated words remaining hyphenated after translation, which is weird, but not as weird as having things like dashes disappear.</li>
<li>We probably want to treat a single-quote as part of a word (don't, doesn't, can't, o'clock).</li>
<li>But most other punctuation should be considered a separator, and put back into the string after translation in the same locations.</li>
</ul>
<p>So <code>string.Split(' ')</code> isn't going to do it any more.</p>
<p>What will?   If you're implementing in a language other than C#/.NET, you may want to just stop reading now and go off on your own.   Many modern languages/frameworks have fairly sophisticated parsing capabilities, and you might be able to get some of this stuff for free.</p>
<p>But we'll go with a simpler algorithm.   We'll keep a list of punctuation we consider part of a word (just single quotes for now, although you could add hyphen if you're confident in your source texts), and letters.   We'll run through the text character by character:</p>
<ul>
<li>If it's "part of a word", we'll just append it to the "current" word we're making.</li>
<li>If not, we'll translate the "current word" (if any), put the translation in the output string, clear the "current word," and then just echo the character we found to the output string, too.</li>
</ul>
<p>That's not too bad to implement in any language.</p>
<p>First, a utility routine:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">TranslationForWordWithCase</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">baseLanguageWord</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">baseLanguageWord</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">outWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GenerateWordFor</span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">.</span><span class="n">ToLower</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="c1">// If the first character is uppercase, but the second one isn&#39;t, convert</span>
<span class="w">    </span><span class="c1">// the first character of the output word to upper case.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">.</span><span class="n">IsUpper</span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"></span>
<span class="w">        </span><span class="p">!(</span><span class="n">baseLanguageWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="kt">char</span><span class="p">.</span><span class="n">IsUpper</span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)))</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">outWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kt">char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">outWord</span><span class="p">[</span><span class="m">0</span><span class="p">])</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">outWord</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="m">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">outWord</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This just handles our capitalization rules.  A word whose first character is capitalized will produce a translation whose first character is capitalized.    But something like "HELLO" will be treated as all lower case.    As usual, you can fiddle with the code if you want different rules.</p>
<p>With that, we can write our long text handler.</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GenerateTextFor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">baseLanguageText</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">string</span><span class="w"> </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="kt">string</span><span class="w"> </span><span class="n">outString</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">      </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">baseLanguageText</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">.</span><span class="n">IsLetter</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="sc">&#39;\&#39;&#39;</span><span class="p">)</span><span class="w"></span>
<span class="w">          </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="n">currentWord</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="k">else</span><span class="w"></span>
<span class="w">          </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">              </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">TranslationForWordWithCase</span><span class="p">(</span><span class="n">currentWord</span><span class="p">);</span><span class="w"></span>
<span class="w">                  </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">              </span><span class="p">}</span><span class="w"></span>
<span class="w">              </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="c1">// Repeat this check, just in case we didn&#39;t end with punctuation.</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">TranslationForWordWithCase</span><span class="p">(</span><span class="n">currentWord</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">outString</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The use of <code>char.IsLetter()</code> means that numbers/digits are considered punctuation.   If you don't want that, you can either use <code>IsLetterOrDigit()</code> or just write out your numbers rather than using digits.</p>
<h3 id="partial-translations">Partial translations<a class="headerlink" href="#partial-translations" title="Permanent link">&para;</a></h3>
<p>The "translation" mechanism in <em>No Man's Sky</em> works by printing out the synthetic text, but with "known" words replaced by their real language equivalent:  "Blah blahh, bblah cucumber bbllaahh mauve," or suchlike.   </p>
<p>There are two mechanism for "knowing" a word.   The player can actually learn them by various means ("knowledge stones" on planet surfaces, speaking with aliens, alien monuments, etc.).   Those are permanently learned and will always translate once known.     The second mechanism are "machine translators," which translate a small number of "additional" words on a translation-by-translation basis.   These words are translated for the current interaction, but become unknown again afterward.</p>
<p>I don't like the exact implementation of that second mechanism—and in fact I'm not sure if my game will even have anything like it—but the idea is sound.    So I'm going to modify it slightly; I'm thinking something like a "linguistics" skill that gives the player a small chance of "guessing" unknown words based on "context."   </p>
<p>The last routine we're going to generate here is one that generates synthetic language texts with the base language filled in for known words. </p>
<p>This will take four arguments:   </p>
<ol>
<li>The base language text to translate.</li>
<li>An array of "known" words in the base language</li>
<li>A percent chance to "guess" each other word</li>
<li>A boolean indicating whether to surround translated words with brackets.</li>
</ol>
<p>That last gives us the option for something like "Blah blahh, bblah [cucumber] bbllaahh [mauve]," which makes the "known words" more obvious.  (It'll use hard brackets for known words and angle-brackets for guessed ones.)</p>
<p>This function is going to be very similar to <code>GenerateTextFor</code>.  In fact, it's going to be <em>so</em> similar, that we probably don't want to write a separate function for it at all, but rather just pass in some optional arguments to <code>GenerateTextFor</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GenerateTextFor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">baseLanguageText</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">knownWords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="kt">float</span><span class="w"> </span><span class="n">percentGuess</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0f</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="kt">bool</span><span class="w"> </span><span class="n">useBracketsForKnown</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">outString</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">baseLanguageText</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">.</span><span class="n">IsLetter</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="sc">&#39;\&#39;&#39;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">currentWord</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">knownWords</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">knownWords</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">currentWord</span><span class="p">.</span><span class="n">ToLower</span><span class="p">()))</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">useBracketsForKnown</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="s">$&quot;[{currentWord}]&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                    </span><span class="k">else</span><span class="w"></span>
<span class="w">                        </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">currentWord</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="m">100f</span><span class="p">)</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">percentGuess</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">useBracketsForKnown</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="s">$&quot;&lt;{currentWord}&gt;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                    </span><span class="k">else</span><span class="w"></span>
<span class="w">                        </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">currentWord</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="k">else</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">TranslationForWordWithCase</span><span class="p">(</span><span class="n">currentWord</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Repeat this check, just in case we didn&#39;t end with punctuation.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">TranslationForWordWithCase</span><span class="p">(</span><span class="n">currentWord</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">outString</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>There's a little repetition in there that we could factor out, but it's not bad.</p>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<p>So, does it work?</p>
<p>I come from the mobile development world, where unit testing is relatively rare.   And I'm not a fan of unit testing for most things in the first place—in my experience, test-driven development in general never pays for itself in higher quality; just higher effort.   A lot of man hours are spent trying to make things unit-testable that would be better spent making them self-diagnostic.  Programming cultures that attempt to institutionalize full-automated-testing for code invariably produce thousands of tests that never fail—typically because they're of the "Does 2 plus 2 still equal 4 today?" variety (or worse, tests that _do_fail intermittently, with "automatic re-running" turned on for as many times as necessary for it to pass), but that never seems to map to higher quality, fewer bugs, or easier integrations.   It does check a box on a report, though.</p>
<p>Me?  I'll take a skilled human tester, any day.   Unlike my experiences with automated tests, human QA's have identified that "weird quirk" for me more times than I can count.</p>
<p>All of that having been said, if a system is:</p>
<ul>
<li><strong>Stateless</strong>, in the sense that it doesn't require the system to be in a given state before it will work.  (For example, in many apps, most functions don't work unless the user is "logged in," and the output of those functions will vary based on what the user has done recently and in what order.)</li>
<li><strong>Predictable</strong>, in the sense that the outputs of the system are either non-random or the randomness can be seeded for repeatability,</li>
<li><strong>Independent</strong>, in the sense that it does not depend on fallible external capabilities like networking, and</li>
<li><strong>Measurable</strong>, in a broad sense</li>
</ul>
<p>Then unit testing can provide both a sort of automated "checklist" for the developer, and a place for other developers to look for examples of the system being called.</p>
<p>Our language generation fails the "predictable" condition, since it generates both the language construction and the "guessing" substitutions randomly.   But maybe we can work around that.</p>
<h3 id="non-random-properties">Non-Random Properties<a class="headerlink" href="#non-random-properties" title="Permanent link">&para;</a></h3>
<p>We want our system to have these properties:</p>
<ul>
<li>Given the same input string, a Language object should produce the same output string on every call.</li>
<li>Different Language objects should produce different outputs for the same output string.</li>
<li>Language objects should produce different outputs for different input strings.</li>
<li>If we pass in a "known" array that contains a word in the input string, the output string should contain that word verbatim.</li>
<li>And if we've got "useBracketsForKnown" on, that would should have [brackets] around it.</li>
<li>All of the above assume a "percentGuess" of 0.    If we pass "percentGuess" of 100, the output string should contain all the words of the input string:</li>
<li>if "useBracketsForKnown" is on, every word not in the known list should have <angle brackets> around it.</li>
<li>If "useBracketsForKnown" is off (false), the input string should be exactly the same as the output string. </li>
</ul>
<p>All those can be tested independently of randomness.</p>
<p>Setting up Unity's unit testing (a variant of NUnit) is a topic for another time.  But assuming you've built one, we can build a test easy enough:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// A Test behaves as an ordinary method</span>
<span class="na">[Test]</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">LanguageSimplePasses</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Use the Assert class to test conditions</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">firstTest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hello, my fine countryman!&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">secondTest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hello, you awful countryman.&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">known</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span><span class="w"></span>
<span class="w">    </span><span class="n">known</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;countryman&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">known</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;you&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">Language</span><span class="w"> </span><span class="n">foreignSpeak</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Language</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">SOFT</span><span class="p">,</span><span class="w"> </span><span class="n">Language</span><span class="p">.</span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">SIMPLE</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">firstTest</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">secondTest</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">firstTest</span><span class="p">),</span><span class="w"> </span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">firstTest</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreNotEqual</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">firstTest</span><span class="p">),</span><span class="w"> </span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">secondTest</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">firstTest</span><span class="p">,</span><span class="w"> </span><span class="n">known</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">secondTest</span><span class="p">,</span><span class="w"> </span><span class="n">known</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">secondTest</span><span class="p">,</span><span class="w"> </span><span class="n">known</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">secondTest</span><span class="p">,</span><span class="w"> </span><span class="n">known</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">IsTrue</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">firstTest</span><span class="p">,</span><span class="w"> </span><span class="n">known</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">).</span><span class="n">Contains</span><span class="p">(</span><span class="s">&quot;[countryman]&quot;</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">IsTrue</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">secondTest</span><span class="p">,</span><span class="w"> </span><span class="n">known</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">).</span><span class="n">Contains</span><span class="p">(</span><span class="s">&quot;[you]&quot;</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">IsTrue</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">secondTest</span><span class="p">,</span><span class="w"> </span><span class="n">known</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">).</span><span class="n">Contains</span><span class="p">(</span><span class="s">&quot;&lt;awful&gt;&quot;</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">IsTrue</span><span class="p">(</span><span class="n">foreignSpeak</span><span class="p">.</span><span class="n">GenerateTextFor</span><span class="p">(</span><span class="n">secondTest</span><span class="p">,</span><span class="w"> </span><span class="n">known</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">).</span><span class="n">Contains</span><span class="p">(</span><span class="n">secondTest</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The "Debug.Log()" lines there are to make the Unity Test Runner window echo results, so that we can see our languages in process.</p>
<p>The test passes, as we can see in the lower part of the Test Runner window.</p>
<div class="highlight"><pre><span></span><code>LanguageSimplePasses (0.017s)
---
Im, ad nel-yw oswo!
Im, va ceth oswo.
Im, ad nel-yw [countryman]!
Im, [you] ceth [countryman].
&lt;Hello&gt;, [you] &lt;awful&gt; [countryman].
Hello, you awful countryman.
</code></pre></div>
<h3 id="non-predictable-properties">Non-Predictable Properties<a class="headerlink" href="#non-predictable-properties" title="Permanent link">&para;</a></h3>
<p>How about the rest?</p>
<ul>
<li>Languages with different settings should "look different."</li>
<li>A few languages should have some punctuation in words.</li>
<li>Guess amounts 0 &lt; x &lt; 100 should produce roughly a corresponding percent of <guessed> words.</li>
<li>Two different input strings with words in common should results in the same "translation" for those words.</li>
<li>Leading capitals and punctuation except for single-quotes should be in the same relative places in the output string as it was in the input string.</li>
</ul>
<p>The first three points are going to depend on our random number generator.  The last two don't, but they're both something that's trivial for a human to check, but relatively annoying to write code for.</p>
<p>We <em>could</em> make the random stuff non-random by using <code>UnityEngine.Random.seed=42</code> or some other fixed number before doing them.   But we're not going to, because doing so creates a subtle dependency:  we'll only get the same outputs—even with the same seed—if the number and order of calls to the random number generator don't change.    Any tests we build based on the results of a single seed are going to be fragile:  Any change (successful or not, valid or not, minor or not) to how the algorithms use <code>Random</code> will make all our tests fail.  And then someone's going to have to spend a day figuring out WHY the tests failed, even if the code is still working perfectly.    That sort of nonsense is why I'm not a Unit Test believer.</p>
<p>But we still need the ability to verify that the code is working as intended, and honestly, we'd be better to rely on human judgement for that.</p>
<p>So we'll just add a bunch of output to the end of the existing test, which will produce a "Manual Evaluation Output" section that we can just look over:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// This isn&#39;t checked as part of the test, it just generates more output </span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;----&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Manual Evaluation Output&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">foreignSpeak</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Language</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">SOFT</span><span class="p">,</span><span class="w"> </span><span class="n">Language</span><span class="p">.</span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">SIMPLE</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Simple, Soft Language&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;\&quot;{firstTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(firstTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;Pass 2: \&quot;{firstTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(firstTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;\&quot;{secondTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(secondTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;Pass 2: \&quot;{secondTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(secondTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">foreignSpeak</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Language</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">HARD</span><span class="p">,</span><span class="w"> </span><span class="n">Language</span><span class="p">.</span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">COMPLEX</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Hard, Complex Language&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;\&quot;{firstTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(firstTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;\&quot;{secondTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(secondTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">foreignSpeak</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Language</span><span class="p">(</span><span class="n">Language</span><span class="p">.</span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">MIDDLE</span><span class="p">,</span><span class="w"> </span><span class="n">Language</span><span class="p">.</span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">MEDIUM</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Medium, Medium Language&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;\&quot;{firstTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(firstTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;\&quot;{secondTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(secondTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">20</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="p">++)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">foreignSpeak</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Language</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Random Language&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;\&quot;{firstTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(firstTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">$&quot;\&quot;{secondTest}\&quot; in language: {foreignSpeak.languageName} is \&quot;{foreignSpeak.GenerateTextFor(secondTest)}\&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Some sample output:</p>
<div class="highlight"><pre><span></span><code>LanguageSimplePasses (0.036s)
---
Ud, evud ussaln nolav!
Ud, omien ull nolav.
Ud, evud ussaln [countryman]!
Ud, [you] ull [countryman].
&lt;Hello&gt;, [you] &lt;awful&gt; [countryman].
Hello, you awful countryman.
----
Manual Evaluation Output
Simple, Soft Language
&quot;Hello, my fine countryman!&quot; in language: Osieh is &quot;Woyn, ew uw in!&quot;
Pass 2: &quot;Hello, my fine countryman!&quot; in language: Osieh is &quot;Woyn, ew uw in!&quot;
&quot;Hello, you awful countryman.&quot; in language: Osieh is &quot;Woyn, fiean alal in.&quot;
Pass 2: &quot;Hello, you awful countryman.&quot; in language: Osieh is &quot;Woyn, fiean alal in.&quot;
Hard, Complex Language
&quot;Hello, my fine countryman!&quot; in language: Es is &quot;Phapi, qui ustabota thuixhagthu!&quot;
&quot;Hello, you awful countryman.&quot; in language: Es is &quot;Phapi, lanet etyvxi thuixhagthu.&quot;
Medium, Medium Language
&quot;Hello, my fine countryman!&quot; in language: Uph is &quot;Dar, heiph elong ungyth!&quot;
&quot;Hello, you awful countryman.&quot; in language: Uph is &quot;Dar, asith harhat ungyth.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Bihalsse is &quot;Ubdakfieni, ni phalanthoephaph phalennu!&quot;
&quot;Hello, you awful countryman.&quot; in language: Bihalsse is &quot;Ubdakfieni, bimy myhapkhu phalennu.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Ullfaoballes is &quot;Seoth, zo phi faob!&quot;
&quot;Hello, you awful countryman.&quot; in language: Ullfaoballes is &quot;Seoth, eln foeongiswo faob.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Cathfi is &quot;Ieh, harbe has thi!&quot;
&quot;Hello, you awful countryman.&quot; in language: Cathfi is &quot;Ieh, en dakubthe thi.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Kyessiss is &quot;Tyizz, quo teoxuk onso!&quot;
&quot;Hello, you awful countryman.&quot; in language: Kyessiss is &quot;Tyizz, asax zuosquoosot onso.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Athimthoha is &quot;Olleb, lues elell issse!&quot;
&quot;Hello, you awful countryman.&quot; in language: Athimthoha is &quot;Olleb, en panul issse.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Eweih is &quot;Syiehmidathing, ylnoln phiewill ylnnelan!&quot;
&quot;Hello, you awful countryman.&quot; in language: Eweih is &quot;Syiehmidathing, lynnil kithuvme ylnnelan.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Me is &quot;Ellboba, yss ssadathssuoss bithuthuong!&quot;
&quot;Hello, you awful countryman.&quot; in language: Me is &quot;Ellboba, ulfietu cethollkha bithuthuong.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Thuunloavkith is &quot;Thissiien, ssaki lonul ingoss!&quot;
&quot;Hello, you awful countryman.&quot; in language: Thuunloavkith is &quot;Thissiien, khoki sy ingoss.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Uphtuxa is &quot;Kha, edosatazzcuth de q!&quot;
&quot;Hello, you awful countryman.&quot; in language: Uphtuxa is &quot;Kha, ot sayk q.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Ezzuw is &quot;Tocath, fa ba hah!&quot;
&quot;Hello, you awful countryman.&quot; in language: Ezzuw is &quot;Tocath, ethma kithdaphak hah.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Ud is &quot;Zuzu, phithe nohath okit!&quot;
&quot;Hello, you awful countryman.&quot; in language: Ud is &quot;Zuzu, ixpaque us okit.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Di is &quot;Bo, oskyizz zoizz osxafaik!&quot;
&quot;Hello, you awful countryman.&quot; in language: Di is &quot;Bo, awhahozz doezz osxafaik.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Iph is &quot;Queediss, ykulnqui ingphize q!&quot;
&quot;Hello, you awful countryman.&quot; in language: Iph is &quot;Queediss, depu piadabhan q.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Quaaddah is &quot;Ke, xatenel qu fiphe!&quot;
&quot;Hello, you awful countryman.&quot; in language: Quaaddah is &quot;Ke, etoxkho nel fiphe.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Bedagix is &quot;Sysu, vikhodar lanfephu khiathothse!&quot;
&quot;Hello, you awful countryman.&quot; in language: Bedagix is &quot;Sysu, khu fa khiathothse.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Ethssyha is &quot;Eindathbe, dahse ssithyle ssiwuwa!&quot;
&quot;Hello, you awful countryman.&quot; in language: Ethssyha is &quot;Eindathbe, issceth uth ssiwuwa.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Quiud is &quot;Ux*ssizuusdi, athath*kho qua*ythzi be!&quot;
&quot;Hello, you awful countryman.&quot; in language: Quiud is &quot;Ux*ssizuusdi, se-ukit ti*xu be.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Phaus is &quot;Feekhase, thinol ky haiehobhagieh!&quot;
&quot;Hello, you awful countryman.&quot; in language: Phaus is &quot;Feekhase, kha wypho haiehobhagieh.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Hap is &quot;Kha, lineldatdar akomwaphi sussawy!&quot;
&quot;Hello, you awful countryman.&quot; in language: Hap is &quot;Kha, pho essaln sussawy.&quot;
Random Language
&quot;Hello, my fine countryman!&quot; in language: Quut is &quot;Ssoaxqu, zait quike tias!&quot;
&quot;Hello, you awful countryman.&quot; in language: Quut is &quot;Ssoaxqu, kathoqu izz tias.&quot;
</code></pre></div>
<p>That looks good to me.</p>
<h1 id="the-code">The Code<a class="headerlink" href="#the-code" title="Permanent link">&para;</a></h1>
<p>Here's the code, all in one place:</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">Newtonsoft.Json</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Implementation of a written language.</span>
<span class="c1">//</span>
<span class="c1">// This uses a No Man&#39;s Sky-like linguistic system.   Languages</span>
<span class="c1">// all have the same grammar, word order, etc. as the player&#39;s chosen</span>
<span class="c1">// language, but different actual words.</span>
<span class="c1">//</span>
<span class="c1">// Messages in game are parsed for words, and each word given a substitute</span>
<span class="c1">// in the &quot;foreign&quot; language.   This dictionary is maintained and extended</span>
<span class="c1">// as new messages are added, and sorted by the frequency of the real-world</span>
<span class="c1">// words seen so far.</span>
<span class="c1">//</span>
<span class="c1">// Players can, through various means, &quot;learn&quot; words of a language; when displayed,</span>
<span class="c1">// those words will be shown in their chosen language (and displayed differently)</span>
<span class="c1">// rather than the synthetic one.   Certain spells and effects may also</span>
<span class="c1">// allow the player to read the synthetic language directly.</span>
<span class="c1">//</span>
<span class="c1">// For the moment, we&#39;ll ignore homographs (words that are spelled alike, but are</span>
<span class="c1">// actually different words, the &quot;lead&quot; in &quot;pencil lead&quot; vs. &quot;lead the troops.&quot;)</span>
<span class="c1">// The synthetic word that matches &quot;lead&quot; will be used for both.   Given the</span>
<span class="c1">// large numbers of other ridiculous assumptions being made here (words are 1:1 substitutes?),</span>
<span class="c1">// I doubt players will care about that one, much.</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// This is a mechanismg for making multiple synthetic languages that are visually</span>
<span class="c1">/// distinct.  It basically selects subsets from one of several &quot;syllable sets&quot;,</span>
<span class="c1">/// as well as probabilities for short vs. long words, frequency of repeated</span>
<span class="c1">/// syllables, and punctuation delimiters.   It will then use those elements to</span>
<span class="c1">/// create an infinite number of words, on demand.</span>
<span class="c1">/// </span>
<span class="c1">/// ??? Someday might be nice to have &quot;alphabetic-like&quot; glyph sets, too, like Ultima&#39;s rune</span>
<span class="c1">/// languages.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="na">[Serializable]</span><span class="w"></span>
<span class="na">[JsonObject(MemberSerialization.OptIn)]</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Language</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// These are the actual syllables that make up the language.   Something like</span>
<span class="w">    </span><span class="c1">// 20 is probably enough for most purposes (remember that the entire vocabulary</span>
<span class="w">    </span><span class="c1">// necessary will only have to cover the in-game strings that occur, so a few thousand</span>
<span class="w">    </span><span class="c1">// words will cover it.</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">syllables</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// These should add up to 100.  They are the chances that a given word will</span>
<span class="w">    </span><span class="c1">// be 1, 2, 3, 4... syllables, respectively.   So {10, 80, 10} would mean that</span>
<span class="w">    </span><span class="c1">// most words in the language are 2 syllables, but 10% are 1 syllable, and 10% are 3.</span>
<span class="w">    </span><span class="c1">// If the language is very regular: (all words are the same number of syllables, or</span>
<span class="w">    </span><span class="c1">// there are only a couple of possibilities), you&#39;ll want more syllables in the list</span>
<span class="w">    </span><span class="c1">// above to cover the vocabulary.</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// If true, the language uses punctuation to separate syllables within a word,</span>
<span class="w">    </span><span class="c1">// e.g. O&#39;clock, brick-a-brack.</span>
<span class="w">    </span><span class="c1">// if true, &quot;punctuations&quot; holds the list of available characters, and</span>
<span class="w">    </span><span class="c1">// &quot;punctuationChance&quot; is the percent chance that any two syllables will</span>
<span class="w">    </span><span class="c1">// have a punctuation mark between them, and &quot;leadPunctuationChance&quot; is the</span>
<span class="w">    </span><span class="c1">// percent chance (which could be higher or lower than punctuationChance) that</span>
<span class="w">    </span><span class="c1">// there will be a punctuation mark specifically after the first syllable.</span>
<span class="w">    </span><span class="c1">// (Real, Fantasy, and Science fiction &quot;languages&quot; seem to emphasize that form a lot. Q&#39;pla! T&#39;Challa, O&#39;Callahan).</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">usesPunctuationDelimeters</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="p">[]?</span><span class="w"> </span><span class="n">punctuations</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">float?</span><span class="w"> </span><span class="n">punctuationChance</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">float?</span><span class="w"> </span><span class="n">leadPunctuationChance</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// The actual &quot;dictionary&quot; of associations between English (or whatever) and</span>
<span class="w">    </span><span class="c1">// the synthetic language.</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">dictionary</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// The actual name of the language, in it&#39;s own language.</span>
<span class="w">    </span><span class="na">[JsonProperty]</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">languageName</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">softSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;la&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;le&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;li&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ly&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;na&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ne&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ni&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;no&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ny&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ha&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;he&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ho&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ma&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;me&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;my&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;al&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;el&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ul&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;il&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ol&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yl&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;an&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;em&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;um&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;im&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;om&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ym&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;an&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;en&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;un&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;in&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;on&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yn&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;lan&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;len&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lun&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lin&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lyn&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;nal&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nel&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nul&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nil&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nol&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nyl&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;all&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ell&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ull&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ill&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;oll&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yll&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;aln&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eln&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uln&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iln&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;oln&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yln&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;eil&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ein&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eim&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eih&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iel&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ien&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iem&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ieh&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;av&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ev&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uv&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iv&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ov&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yv&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;va&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ve&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;vu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;vi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;vo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;vy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;aw&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ew&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uw&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iw&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ow&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yw&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;wa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;we&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;wu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;wi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;wo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;wy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">middleSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ang&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eng&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ing&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ung&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ong&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;fa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fu&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;fae&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fie&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fee&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;foe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fum&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;dan&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dak&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dah&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dal&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;dath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dap&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dag&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dar&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;das&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;han&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hak&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hah&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hal&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;hath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hap&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hag&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;har&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;has&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;kha&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;khe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;khi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kho&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;khu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;khy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;tha&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;the&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;thi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tho&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;thu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;thy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eth&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ith&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;oth&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uth&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yth&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;sa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ssa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;se&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sse&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;si&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ssi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;so&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sso&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;su&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ssu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sy&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ssy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;as&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ass&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;es&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ess&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;is&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iss&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;os&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;oss&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;us&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uss&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ys&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yss&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ba&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;be&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bu&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ab&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eb&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ib&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ub&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;pha&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;phe&quot;</span><span class="p">,</span><span class="w">  </span><span class="s">&quot;phi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pho&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;phu&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;aph&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eph&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iph&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;oph&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uph&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;cath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ceth&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;kith&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;coth&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cuth&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cyth&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">hardSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ka&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ke&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ku&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ko&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ky&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;sa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;se&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;su&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;si&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;so&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sy&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ta&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;te&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ti&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;to&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ty&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;pa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;po&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;py&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ak&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ek&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uk&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ik&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ok&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yk&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;at&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;et&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ut&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;it&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ot&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yt&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;as&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;es&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;us&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;is&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;os&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ys&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;xa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xo&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ax&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ex&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ix&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ux&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ox&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;da&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;de&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;di&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;du&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;do&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;ad&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ed&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ud&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;od&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;q&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;qua&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;que&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;qui&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;quo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;qu&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;za&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ze&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;zi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;zo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;zu&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;azz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ezz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;izz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ozz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uzz&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>


<span class="w">    </span><span class="c1">// Determines whether the language picks mostly from</span>
<span class="w">    </span><span class="c1">// the &quot;soft,&quot; &quot;middle,&quot; or &quot;hard&quot; syllables</span>
<span class="w">    </span><span class="c1">// RANDOM chooses one of these values with equal probability.</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">LanguageBias</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">RANDOM</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">SOFT</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">MIDDLE</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">HARD</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Determines the number of syllables used for words (simple = fewer),</span>
<span class="w">    </span><span class="c1">// and the number of total syllables in the language (simple = fewer here, too). </span>
<span class="w">    </span><span class="c1">// RANDOM generates a random value.</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">RANDOM</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">SIMPLE</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">MEDIUM</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">COMPLEX</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">ChooseSyllables</span><span class="p">(</span><span class="n">LanguageBias</span><span class="w"> </span><span class="n">bias</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">syllablesAvailable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">softSyllables</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">middleSyllables</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">hardSyllables</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">syllablesAvailable</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">1.5f</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s">$&quot;ASSERT: We&#39;re looking for {number} syllables out of {syllablesAvailable}, which will likely take a long time.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">chosen</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span><span class="w"></span>
<span class="w">        </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">favorite</span><span class="p">,</span><span class="w"> </span><span class="n">secondBest</span><span class="p">,</span><span class="w"> </span><span class="n">thirdBest</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Order our lists by how much we like them.</span>
<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">bias</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">SOFT</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="n">favorite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">softSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">secondBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">middleSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">thirdBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hardSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">HARD</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="n">favorite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hardSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">secondBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">middleSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">thirdBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">softSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">MIDDLE</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="k">default</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="n">favorite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">middleSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">secondBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">softSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">thirdBest</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hardSyllables</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">chosen</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">percentileRoll</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="kt">string</span><span class="w"> </span><span class="n">syllable</span><span class="p">;</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentileRoll</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">70</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">syllable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">favorite</span><span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">favorite</span><span class="p">.</span><span class="n">Count</span><span class="p">)];</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentileRoll</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">95</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">syllable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">secondBest</span><span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">secondBest</span><span class="p">.</span><span class="n">Count</span><span class="p">)];</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">else</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">syllable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">thirdBest</span><span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">thirdBest</span><span class="p">.</span><span class="n">Count</span><span class="p">)];</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(!</span><span class="n">chosen</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">syllable</span><span class="p">))</span><span class="w"></span>
<span class="w">                </span><span class="n">chosen</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">syllable</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">chosen</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>


<span class="w">    </span><span class="c1">/// &lt;summary&gt;</span>
<span class="w">    </span><span class="c1">/// Constructor to generate one of these.</span>
<span class="w">    </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Language</span><span class="p">(</span><span class="n">LanguageBias</span><span class="w"> </span><span class="n">bias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">RANDOM</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">LanguageComplexity</span><span class="w"> </span><span class="n">complexity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">RANDOM</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Choose a bias emphasis.</span>
<span class="w">        </span><span class="n">LanguageBias</span><span class="w"> </span><span class="n">useBias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">bias</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bias</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">RANDOM</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="m">0</span><span class="p">:</span><span class="w"> </span><span class="n">useBias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">SOFT</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="m">1</span><span class="p">:</span><span class="w"> </span><span class="n">useBias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">MIDDLE</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">default</span><span class="p">:</span><span class="w"> </span><span class="n">useBias</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">LanguageBias</span><span class="p">.</span><span class="n">HARD</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// And a number of syllables (a crude measure of language complexity).</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">numSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="m">120</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">percentSyllableCountChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">};</span><span class="w"></span>

<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">complexity</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">SIMPLE</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="n">numSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">percentSyllableCountChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">MEDIUM</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="n">numSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">70</span><span class="p">,</span><span class="w"> </span><span class="m">105</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">percentSyllableCountChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">45</span><span class="p">,</span><span class="w"> </span><span class="m">35</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">LanguageComplexity</span><span class="p">.</span><span class="n">COMPLEX</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="n">percentSyllableCountChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="m">35</span><span class="p">,</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">                </span><span class="n">numSyllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">120</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">default</span><span class="p">:</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="c1">// Already covered</span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="n">syllables</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">ChooseSyllables</span><span class="p">(</span><span class="n">useBias</span><span class="p">,</span><span class="w"> </span><span class="n">numSyllables</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// We&#39;ll use a fixed 15% chance that our language uses punctuation delimiters</span>
<span class="w">        </span><span class="n">usesPunctuationDelimeters</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">15</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">usesPunctuationDelimeters</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Set these to small, fixed values for now.  We can be more</span>
<span class="w">            </span><span class="c1">// selective later, if we need more variation.</span>
<span class="w">            </span><span class="n">punctuations</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">            </span><span class="n">punctuationChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">10f</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">leadPunctuationChance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">35f</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="n">dictionary</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">&gt;();</span><span class="w"></span>
<span class="w">        </span><span class="n">languageName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">GenerateLanguageName</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;</span>
<span class="w">    </span><span class="c1">/// Generates the language&#39;s actual name</span>
<span class="w">    </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">GenerateLanguageName</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// The &quot;__&quot; on the end will guarantee uniqueness, since all other</span>
<span class="w">        </span><span class="c1">// input sources are filtered for punctuation.</span>
<span class="w">        </span><span class="n">languageName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TranslationForWordWithCase</span><span class="p">(</span><span class="s">&quot;LanguageName__&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;</span>
<span class="w">    </span><span class="c1">/// Picks the number of syllables for a word (randomly)</span>
<span class="w">    </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="w">    </span><span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">SyllableCount</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percentSyllableCountChance</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">chanceSum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">chance</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">chanceSum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">chance</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">chance</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ASSERT: Zero or negative probability in percentSyllableCountChance.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">chanceSum</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">outNum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">[</span><span class="n">outNum</span><span class="p">])</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">num</span><span class="w"> </span><span class="p">-=</span><span class="w"> </span><span class="n">percentSyllableCountChance</span><span class="p">[</span><span class="n">outNum</span><span class="p">];</span><span class="w"></span>
<span class="w">            </span><span class="n">outNum</span><span class="p">++;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">outNum</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;</span>
<span class="w">    </span><span class="c1">/// Generates a word for the &quot;baseLanguageWord&quot; if it&#39;s not already present,</span>
<span class="w">    </span><span class="c1">/// then adds it to the dictionary and returns it.</span>
<span class="w">    </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="w">    </span><span class="c1">/// &lt;param name=&quot;baseLanguageWord&quot;&gt;&lt;/param&gt;</span>
<span class="w">    </span><span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GenerateWordFor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">baseLanguageWord</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(!</span><span class="n">dictionary</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">numSyll</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SyllableCount</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="kt">string</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">numSyll</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="p">++)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">word</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">syllables</span><span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">syllables</span><span class="p">.</span><span class="n">Count</span><span class="p">)];</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">usesPunctuationDelimeters</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">numSyll</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="kt">float</span><span class="w"> </span><span class="n">percent</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="m">100f</span><span class="p">);</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">percent</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">?</span><span class="w"> </span><span class="n">leadPunctuationChance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">punctuationChance</span><span class="p">))</span><span class="w"></span>
<span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">choice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">punctuations</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span><span class="w"></span>
<span class="w">                        </span><span class="n">word</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">punctuations</span><span class="p">[</span><span class="n">choice</span><span class="p">];</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="n">dictionary</span><span class="p">[</span><span class="n">baseLanguageWord</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">word</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">dictionary</span><span class="p">[</span><span class="n">baseLanguageWord</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">TranslationForWordWithCase</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">baseLanguageWord</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">baseLanguageWord</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">outWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GenerateWordFor</span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">.</span><span class="n">ToLower</span><span class="p">());</span><span class="w"></span>

<span class="w">        </span><span class="c1">// If the first character is uppercase, but the second one isn&#39;t, convert</span>
<span class="w">        </span><span class="c1">// the first character of the output word to upper case.</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">.</span><span class="n">IsUpper</span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"></span>
<span class="w">            </span><span class="p">!(</span><span class="n">baseLanguageWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="kt">char</span><span class="p">.</span><span class="n">IsUpper</span><span class="p">(</span><span class="n">baseLanguageWord</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)))</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">outWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kt">char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">outWord</span><span class="p">[</span><span class="m">0</span><span class="p">])</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">outWord</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="m">1</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">outWord</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;</span>
<span class="w">    </span><span class="c1">/// Parses the passed string into words (using spaces as delimeters),</span>
<span class="w">    </span><span class="c1">/// then calls GenerateWordFor on each one, concatenates the results,</span>
<span class="w">    </span><span class="c1">/// and returns the text.  </span>
<span class="w">    </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="w">    </span><span class="c1">/// &lt;param name=&quot;baseLanguageText&quot;&gt;&lt;/param&gt;</span>
<span class="w">    </span><span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GenerateTextFor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">baseLanguageText</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">knownWords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="kt">float</span><span class="w"> </span><span class="n">percentGuess</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0f</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="kt">bool</span><span class="w"> </span><span class="n">useBracketsForKnown</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">outString</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">baseLanguageText</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">.</span><span class="n">IsLetter</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="sc">&#39;\&#39;&#39;</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">currentWord</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">else</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">knownWords</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">knownWords</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">currentWord</span><span class="p">.</span><span class="n">ToLower</span><span class="p">()))</span><span class="w"></span>
<span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">useBracketsForKnown</span><span class="p">)</span><span class="w"></span>
<span class="w">                            </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="s">$&quot;[{currentWord}]&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                        </span><span class="k">else</span><span class="w"></span>
<span class="w">                            </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">currentWord</span><span class="p">;</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Random</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">0f</span><span class="p">,</span><span class="w"> </span><span class="m">100f</span><span class="p">)</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">percentGuess</span><span class="p">)</span><span class="w"></span>
<span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">useBracketsForKnown</span><span class="p">)</span><span class="w"></span>
<span class="w">                            </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="s">$&quot;&lt;{currentWord}&gt;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                        </span><span class="k">else</span><span class="w"></span>
<span class="w">                            </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">currentWord</span><span class="p">;</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="k">else</span><span class="w"></span>
<span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">TranslationForWordWithCase</span><span class="p">(</span><span class="n">currentWord</span><span class="p">);</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>

<span class="w">                </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Repeat this check, just in case we didn&#39;t end with punctuation.</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentWord</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">outString</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">TranslationForWordWithCase</span><span class="p">(</span><span class="n">currentWord</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">currentWord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">outString</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js"></script>
      
    
  </body>
</html>